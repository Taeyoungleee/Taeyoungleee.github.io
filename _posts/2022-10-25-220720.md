---
layout: single
title:  "jupyter notebook 변환하기!"
categories: coding
tag: [python, blog, jekyll]
toc: true
author_profile: false
---

<head>
  <style>
    table.dataframe {
      white-space: normal;
      width: 100%;
      height: 240px;
      display: block;
      overflow: auto;
      font-family: Arial, sans-serif;
      font-size: 0.9rem;
      line-height: 20px;
      text-align: center;
      border: 0px !important;
    }

    table.dataframe th {
      text-align: center;
      font-weight: bold;
      padding: 8px;
    }

    table.dataframe td {
      text-align: center;
      padding: 8px;
    }

    table.dataframe tr:hover {
      background: #b8d1f3; 
    }

    .output_prompt {
      overflow: auto;
      font-size: 0.9rem;
      line-height: 1.45;
      border-radius: 0.3rem;
      -webkit-overflow-scrolling: touch;
      padding: 0.8rem;
      margin-top: 0;
      margin-bottom: 15px;
      font: 1rem Consolas, "Liberation Mono", Menlo, Courier, monospace;
      color: $code-text-color;
      border: solid 1px $border-color;
      border-radius: 0.3rem;
      word-break: normal;
      white-space: pre;
    }

  .dataframe tbody tr th:only-of-type {
      vertical-align: middle;
  }

  .dataframe tbody tr th {
      vertical-align: top;
  }

  .dataframe thead th {
      text-align: center !important;
      padding: 8px;
  }

  .page__content p {
      margin: 0 0 0px !important;
  }

  .page__content p > strong {
    font-size: 0.8rem !important;
  }

  </style>
</head>


# EDA, 모델 수정 2


## 0.준비



- 한글 폰트 적용

  - 아래 셀 실행 후 런타임 다시 시작, 런타임 모두 실행



```python
!sudo apt-get install -y fonts-nanum
!sudo fc-cache -fv
!rm ~/.cache/matplotlib -rf
```

<pre>
Reading package lists... Done
Building dependency tree       
Reading state information... Done
fonts-nanum is already the newest version (20170925-1).
The following package was automatically installed and is no longer required:
  libnvidia-common-460
Use 'sudo apt autoremove' to remove it.
0 upgraded, 0 newly installed, 0 to remove and 49 not upgraded.
/usr/share/fonts: caching, new cache contents: 0 fonts, 1 dirs
/usr/share/fonts/truetype: caching, new cache contents: 0 fonts, 3 dirs
/usr/share/fonts/truetype/humor-sans: caching, new cache contents: 1 fonts, 0 dirs
/usr/share/fonts/truetype/liberation: caching, new cache contents: 16 fonts, 0 dirs
/usr/share/fonts/truetype/nanum: caching, new cache contents: 10 fonts, 0 dirs
/usr/local/share/fonts: caching, new cache contents: 0 fonts, 0 dirs
/root/.local/share/fonts: skipping, no such directory
/root/.fonts: skipping, no such directory
/var/cache/fontconfig: cleaning cache directory
/root/.cache/fontconfig: not cleaning non-existent cache directory
/root/.fontconfig: not cleaning non-existent cache directory
fc-cache: succeeded
</pre>
- 라이브러리



```python
import matplotlib.pyplot as plt
plt.rc('font', family='NanumBarunGothic')

from google.colab import drive
drive.mount('/content/drive')

import pandas as pd
```

<pre>
Mounted at /content/drive
</pre>
- 데이터 로드



```python
train = pd.read_csv('/content/drive/MyDrive/구내식당/train.csv')
test = pd.read_csv('/content/drive/MyDrive/구내식당/test.csv')
submission = pd.read_csv('/content/drive/MyDrive/구내식당/sample_submission.csv')
```

- 데이터 전처리

  - train



```python
# 석식 이용 인원 0인 날 삭제
train = train[train['석식계'] != 0]

# 요일 숫자로 변경
train.loc[train['요일'] == '월', '요일'] = 1
train.loc[train['요일'] == '화', '요일'] = 2
train.loc[train['요일'] == '수', '요일'] = 3
train.loc[train['요일'] == '목', '요일'] = 4
train.loc[train['요일'] == '금', '요일'] = 5

# 월 칼럼 추가
def month(text:str):
  return int(text[5:7])
train['월'] = train['일자'].map(month)

# 일 칼럼 추가
def day(text:str):
  return int(text[-2:])
train['일'] = train['일자'].map(day)

train.head()
```

<pre>
/usr/local/lib/python3.7/dist-packages/pandas/core/indexing.py:1817: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  self._setitem_single_column(loc, value, pi)
/usr/local/lib/python3.7/dist-packages/ipykernel_launcher.py:14: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  
/usr/local/lib/python3.7/dist-packages/ipykernel_launcher.py:19: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
</pre>
<pre>
           일자 요일  본사정원수  본사휴가자수  본사출장자수  본사시간외근무명령서승인건수  현본사소속재택근무자수  \
0  2016-02-01  1   2601      50     150             238          0.0   
1  2016-02-02  2   2601      50     173             319          0.0   
2  2016-02-03  3   2601      56     180             111          0.0   
3  2016-02-04  4   2601     104     220             355          0.0   
4  2016-02-05  5   2601     278     181              34          0.0   

                                                조식메뉴  \
0  모닝롤/찐빵  우유/두유/주스 계란후라이  호두죽/쌀밥 (쌀:국내산) 된장찌개  쥐...   
1  모닝롤/단호박샌드  우유/두유/주스 계란후라이  팥죽/쌀밥 (쌀:국내산) 호박젓국찌...   
2  모닝롤/베이글  우유/두유/주스 계란후라이  표고버섯죽/쌀밥 (쌀:국내산) 콩나물국...   
3  모닝롤/토마토샌드  우유/두유/주스 계란후라이  닭죽/쌀밥 (쌀,닭:국내산) 근대국...   
4  모닝롤/와플  우유/두유/주스 계란후라이  쇠고기죽/쌀밥 (쌀:국내산) 재첩국  방...   

                                                중식메뉴  \
0  쌀밥/잡곡밥 (쌀,현미흑미:국내산) 오징어찌개  쇠불고기 (쇠고기:호주산) 계란찜 ...   
1  쌀밥/잡곡밥 (쌀,현미흑미:국내산) 김치찌개  가자미튀김  모둠소세지구이  마늘쫑무...   
2  카레덮밥 (쌀,현미흑미:국내산) 팽이장국  치킨핑거 (닭고기:국내산) 쫄면야채무침 ...   
3  쌀밥/잡곡밥 (쌀,현미흑미:국내산) 쇠고기무국  주꾸미볶음  부추전  시금치나물  ...   
4  쌀밥/잡곡밥 (쌀,현미흑미:국내산) 떡국  돈육씨앗강정 (돼지고기:국내산) 우엉잡채...   

                                                석식메뉴     중식계    석식계  월  일  
0  쌀밥/잡곡밥 (쌀,현미흑미:국내산) 육개장  자반고등어구이  두부조림  건파래무침 ...  1039.0  331.0  2  1  
1  콩나물밥*양념장 (쌀,현미흑미:국내산) 어묵국  유산슬 (쇠고기:호주산) 아삭고추무...   867.0  560.0  2  2  
2  쌀밥/잡곡밥 (쌀,현미흑미:국내산) 청국장찌개  황태양념구이 (황태:러시아산) 고기...  1017.0  573.0  2  3  
3  미니김밥*겨자장 (쌀,현미흑미:국내산) 우동  멕시칸샐러드  군고구마  무피클  포...   978.0  525.0  2  4  
4  쌀밥/잡곡밥 (쌀,현미흑미:국내산) 차돌박이찌개 (쇠고기:호주산) 닭갈비 (닭고기:...   925.0  330.0  2  5  
</pre>
- 데이터 전처리

  - test



```python
# 요일 숫자로 변경
test.loc[test['요일'] == '월', '요일'] = 1
test.loc[test['요일'] == '화', '요일'] = 2
test.loc[test['요일'] == '수', '요일'] = 3
test.loc[test['요일'] == '목', '요일'] = 4
test.loc[test['요일'] == '금', '요일'] = 5

# 월 칼럼 추가
test['월'] = test['일자'].map(month)

# 일 칼럼 추가
test['일'] = test['일자'].map(day)

test.head()
```

<pre>
           일자 요일  본사정원수  본사휴가자수  본사출장자수  본사시간외근무명령서승인건수  현본사소속재택근무자수  \
0  2021-01-27  3   2983      88     182               5        358.0   
1  2021-01-28  4   2983     104     212             409        348.0   
2  2021-01-29  5   2983     270     249               0        294.0   
3  2021-02-01  1   2924     108     154             538        322.0   
4  2021-02-02  2   2924      62     186             455        314.0   

                                                조식메뉴  \
0  모닝롤/연유버터베이글 우유/주스 계란후라이/찐계란 단호박죽/흑미밥 우거지국 고기완자...   
1  모닝롤/대만샌드위치 우유/주스 계란후라이/찐계란 누룽지탕/흑미밥 황태국 시래기지짐 ...   
2  모닝롤/핫케익 우유/주스 계란후라이/찐계란 오곡죽/흑미밥 매생이굴국 고구마순볶음 양...   
3  모닝롤/촉촉한치즈케익 우유/주스 계란후라이/찐계란 누룽지탕/흑미밥 두부김칫국 새우완...   
4  모닝롤/토마토샌드 우유/주스 계란후라이/찐계란 채소죽/흑미밥 호박맑은국 오이생채 양...   

                                                중식메뉴  \
0  쌀밥/흑미밥/찰현미밥 대구지리 매운돈갈비찜 오꼬노미계란말이 상추무침 포기김치 양상추...   
1  쌀밥/보리밥/찰현미밥 우렁된장찌개 오리주물럭 청양부추전 수제삼색무쌈 겉절이김치 양상...   
2  쌀밥/흑미밥/찰현미밥 팽이장국 수제돈까스*소스 가자미조림 동초나물무침 포기김치 양상...   
3  쌀밥/흑미밥/찰현미밥 배추들깨국 오리대패불고기 시금치프리타타 부추고추장무침 포기김치...   
4  쌀밥/팥밥/찰현미밥 부대찌개 닭살데리야끼조림 버섯탕수 세발나물무침 알타리김치/사과푸...   

                                            석식메뉴  월   일  
0  흑미밥 얼큰순두부찌개 쇠고기우엉볶음 버섯햄볶음 (New)아삭이고추무절임 포기김치   1  27  
1            충무김밥 우동국물 오징어무침 꽃맛살샐러드 얼갈이쌈장무침 석박지   1  28  
2            흑미밥 물만둣국 카레찜닭 숯불양념꼬지어묵 꼬시래기무침 포기김치   1  29  
3           흑미밥 동태탕 돈육꽈리고추장조림 당면채소무침 모자반무침 포기김치   2   1  
4       흑미밥 바지락살국 쇠고기청경채볶음 두부구이*볶은김치 머위된장무침 백김치   2   2  
</pre>
## 1.EDA


### 1) feature를 주인공으로



- 본사정원수는 지속적으로 우상향

- 휴가자수는 연휴 전후로 급등

- 출장자수는 특이 패턴 없음

- 시간외근무승인건수, 야근하는 사람 수 특이 패턴 있음

- 재택근무자수 특정일 기준 발생



```python
train[['본사정원수']].plot(figsize=(15,5))
plt.show()

train[['본사휴가자수']].plot(figsize=(15,5))
plt.show()

train[['본사출장자수']].plot(figsize=(15,5))
plt.show()

train[['본사시간외근무명령서승인건수']].plot(figsize=(15,5))
plt.show()

train[['현본사소속재택근무자수']].plot(figsize=(15,5))
plt.show()
```

<pre>
<Figure size 1080x360 with 1 Axes>
</pre>
<pre>
<Figure size 1080x360 with 1 Axes>
</pre>
<pre>
<Figure size 1080x360 with 1 Axes>
</pre>
<pre>
<Figure size 1080x360 with 1 Axes>
</pre>
<pre>
<Figure size 1080x360 with 1 Axes>
</pre>
#### a) 재택근무 발생 원인



- 코로나의 영향



```python
train[train['현본사소속재택근무자수'] > 100]
```

<pre>
              일자 요일  본사정원수  본사휴가자수  본사출장자수  본사시간외근무명령서승인건수  현본사소속재택근무자수  \
1010  2020-03-20  5   2950     176     263               3        135.0   
1011  2020-03-23  1   2950     109     178             687        285.0   
1012  2020-03-24  2   2950     131     137             639        303.0   
1013  2020-03-25  3   2950     122     146               1        303.0   
1014  2020-03-26  4   2950     133     133             584        288.0   
...          ... ..    ...     ...     ...             ...          ...   
1200  2021-01-20  3   2983      75     198               4        391.0   
1201  2021-01-21  4   2983      92     231             462        351.0   
1202  2021-01-22  5   2983     255     248               1        303.0   
1203  2021-01-25  1   2983     107     153             616        327.0   
1204  2021-01-26  2   2983      69     183             551        362.0   

                                                   조식메뉴  \
1010  모닝롤/허니브레드  우유/주스 계란후라이 야채죽/쌀밥 (쌀:국내산) 꽃게탕 (오징어...   
1011  모닝롤/베이글  우유/주스 계란후라이 누룽지탕/쌀밥 (쌀:국내산) 감자국  꽈리고추...   
1012  모닝롤/햄치즈샌드  우유/주스 계란후라이 잣죽/쌀밥 (쌀:국내산) 쑥국  수제어묵볶...   
1013  모닝롤/고구마파이  우유/주스 계란후라이 누룽지탕/쌀밥 (쌀:국내산) 피홍합탕  감...   
1014  모닝롤/바나나샌드  우유/주스 계란후라이 새송이죽/쌀밥 (쌀:국내산) 버섯매운탕 (...   
...                                                 ...   
1200  모닝롤/페퍼로니피자 우유/주스 계란후라이/찐계란 크루통크림스프/흑미밥 아귀지리 마늘...   
1201  모닝롤/생크림단팥빵 우유/주스 계란후라이/찐계란 누룽지탕/흑미밥 떡국 해물땡굴소스볶...   
1202  모닝롤/BLT샌드위치 우유/주스 계란후라이/찐계란 흑임자죽/흑미밥 바지락살국 두부조...   
1203  모닝롤/호박고구마오븐구이 우유/주스 계란후라이/찐계란 누룽지탕/흑미밥 감자양파국 분...   
1204  모닝롤/야채샌드 우유/주스 계란후라이/찐계란 참치죽/흑미밥 홍합탕 애호박새우젓볶음 ...   

                                                   중식메뉴  \
1010  쌀밥/잡곡밥 (쌀,현미,흑미:국내산) 갈비탕 (갈비:호주산) 칠리새우  감자채볶음 ...   
1011  쌀밥/잡곡밥 (쌀,현미,흑미:국내산) 시래기국  오리양념불고기*쌈무 (오리:국내산)...   
1012  쌀밥/잡곡밥 (쌀,현미,흑미:국내산) 소고기미역국 (소고기:호주산) 해물누룽지탕 (...   
1013  쌀밥/잡곡밥 (쌀,현미,흑미:국내산) 유부주머니국  목살스테이크 (목살:국내산) 파...   
1014  쌀밥/잡곡밥 (쌀,현미,흑미:국내산) 배추된장국  제육볶음 (돈육:국내산) 계란찜 ...   
...                                                 ...   
1200  쌀밥/흑미밥/찰현미밥 아욱국 수제함박스테이크 견과류마카로니범벅 생깻잎지 단호박물김치...   
1201  쌀밥/수수밥/찰현미밥 냉이된장국 동파육 봄동전 청경채/버섯숙회*초장 무생채 양상추샐...   
1202  전주비빔밥*약고추장 계란파국 요거닭 올방개묵무침 파프리카해초무침 포기김치 양상추샐러...   
1203  쌀밥/흑미밥/찰현미밥 전주식콩나물해장국 돈육간장불고기 깐풍연근 연두부*달래양념장 봄...   
1204  쌀밥/귀리밥/찰현미밥 들깨미역국 교촌간장치킨 옥수수콘치즈구이 가지고추장무침 포기김치...   

                                                   석식메뉴     중식계    석식계  월   일  
1010  쌀밥/잡곡밥 (쌀,현미,흑미:국내산) 건새우아욱국  치즈함박스테이크 (돈육:국내,수...   627.0  358.0  3  20  
1011  쌀밥/잡곡밥 (쌀,현미,흑미:국내산) 닭개장 (닭:국내산) 삼치튀김*데리야끼  한식...  1110.0  651.0  3  23  
1012  오므라이스 (쌀:국내산) 가쯔오장국  돈육고구마강정 (돈육:국내산) 과일플레인샐러드...  1083.0  754.0  3  24  
1013             찹쌀밥  장각닭죽  생야채*쌈짱  오렌지  하루야채주스  포기김치    1022.0  526.0  3  25  
1014  멸치주먹밥 (쌀,현미흑미:국내산) 우동  해물까스*와사비소스  꽃맛살샐러드  무피클...   955.0  645.0  3  26  
...                                                 ...     ...    ... ..  ..  
1200     김치볶음밥 미니쫄우동*맛살튀김 브로콜리깨소스무침 계란후라이 고들빼기무침 겉절이김치   1093.0  421.0  1  20  
1201            흑미밥 쇠고기무국 삼치양념구이 비엔나채소볶음 숙주나물당근무침 포기김치    832.0  353.0  1  21  
1202        흑미밥 수제비국 수제맛쵸킹탕수육 유부채소겨자냉채 참나물무침 갓김치/겉절이김치    579.0  217.0  1  22  
1203            흑미밥 열무된장국 장어강정*데리야끼소스 깻잎쌈*생강채 오이선 포기김치   1145.0  502.0  1  25  
1204         (New)할라피뇨멸치주먹밥 잔치국수 수제고기육전 쑥갓나물 양파초절임 깍두기   1015.0  480.0  1  26  

[193 rows x 14 columns]
</pre>
#### b) 본사 시간 외 근무 이상치 발생 원인



- 수요일과 금요일에 일종의 야근 없는 날 존재



```python
train[train['본사시간외근무명령서승인건수'] == 0]['요일'].value_counts()
```

<pre>
3    148
5     34
Name: 요일, dtype: int64
</pre>

```python
x = ['수요일', '금요일']
y = train[train['본사시간외근무명령서승인건수'] == 0].value_counts('요일').values

plt.figure(dpi=150)

plt.title("시간외근무명령서승인건수 = 0")
plt.xlabel('요일')
plt.ylabel('횟수')

plt.bar(x, y)
plt.show()
```

<pre>
<Figure size 900x600 with 1 Axes>
</pre>
### 2) feature와 target의 상관관계


#### a) 중식계와 feature의 상관관계



```python
train.sort_values(by='중식계')[['본사정원수',	'본사휴가자수',	'본사출장자수',	'본사시간외근무명령서승인건수',	'현본사소속재택근무자수', '중식계']].reset_index(drop=True).plot(figsize=(15,10))
plt.show()
```

<pre>
<Figure size 1080x720 with 1 Axes>
</pre>
- 출장자수



```python
train.sort_values(by='중식계')[['본사출장자수', '중식계']].reset_index(drop=True).plot(figsize=(15,10))
plt.show()
```

<pre>
<Figure size 1080x720 with 1 Axes>
</pre>
- 휴가자수



```python
train.sort_values(by='중식계')[['본사휴가자수', '중식계']].reset_index(drop=True).plot(figsize=(15,10))
plt.show()
```

<pre>
<Figure size 1080x720 with 1 Axes>
</pre>
- 현재원



  본사정원수 - 휴가자수 - 출장자수



```python
train['현재원'] = train['본사정원수'] - train['본사휴가자수'] - train['본사출장자수']
train.sort_values(by='중식계')[['현재원', '중식계']].reset_index(drop=True).plot(figsize=(15,10))
plt.show()
```

<pre>
<Figure size 1080x720 with 1 Axes>
</pre>
#### b) 석식계와 feature의 상관관계



```python
train.sort_values(by='석식계')[['본사정원수',	'본사휴가자수',	'본사출장자수',	'본사시간외근무명령서승인건수',	'현본사소속재택근무자수', '석식계'	]].reset_index(drop=True).plot(figsize=(15,10))
plt.show()
```

<pre>
<Figure size 1080x720 with 1 Axes>
</pre>
- 시간외근무



```python
train.sort_values(by='석식계')[['본사시간외근무명령서승인건수', '석식계']].reset_index(drop=True).plot(figsize=(15,10))
```

<pre>
<matplotlib.axes._subplots.AxesSubplot at 0x7f00c422ac50>
</pre>
<pre>
<Figure size 1080x720 with 1 Axes>
</pre>
#### c) 중식계와 석식계의 상관관계



```python
train.sort_values(by='석식계')[['중식계', '석식계']].reset_index(drop=True).plot(figsize=(15,10))
```

<pre>
<matplotlib.axes._subplots.AxesSubplot at 0x7f00c4253ed0>
</pre>
<pre>
<Figure size 1080x720 with 1 Axes>
</pre>
### 3) EDA, 인사이트 정리

PPT


## 2.EDA를 통해 도출한 인사이트



- 본사정원수는 Target과 관계가 없다.



- 본사정원수는 현재원으로 활용 가능하다.



- 중식계는 휴가자수와 출장자수와 관계가 있다.



- 석식계는 시간외근무자수와 관계가 있다.



- 중식계와 석식계는 상관관계가 있다.


### 1) 본사정원수는 target과 관계가 없다



```python
train.sort_values(by='중식계')[['본사정원수', '중식계']].reset_index(drop=True).plot(figsize=(15,10))
plt.show()
```

<pre>
<Figure size 1080x720 with 1 Axes>
</pre>
### 2) 본사정원수는 현재원으로 활용 가능



```python
train['현재원'] = train['본사정원수'] - train['본사휴가자수'] - train['본사출장자수'] - train['현본사소속재택근무자수']
train.sort_values(by='중식계')[['현재원', '중식계']].reset_index(drop=True).plot(figsize=(15,10))
plt.show()
```

<pre>
<Figure size 1080x720 with 1 Axes>
</pre>
### 3) 중식계와 석식계는 상관관계가 있다



```python
train.sort_values(by='석식계')[['중식계', '석식계']].reset_index(drop=True).plot(figsize=(15,10))
```

<pre>
<matplotlib.axes._subplots.AxesSubplot at 0x7f00c23f8a50>
</pre>
<pre>
<Figure size 1080x720 with 1 Axes>
</pre>
## 3.인사이트를 바탕으로 모델 수정



```python
train
```

<pre>
              일자 요일  본사정원수  본사휴가자수  본사출장자수  본사시간외근무명령서승인건수  현본사소속재택근무자수  \
0     2016-02-01  1   2601      50     150             238          0.0   
1     2016-02-02  2   2601      50     173             319          0.0   
2     2016-02-03  3   2601      56     180             111          0.0   
3     2016-02-04  4   2601     104     220             355          0.0   
4     2016-02-05  5   2601     278     181              34          0.0   
...          ... ..    ...     ...     ...             ...          ...   
1200  2021-01-20  3   2983      75     198               4        391.0   
1201  2021-01-21  4   2983      92     231             462        351.0   
1202  2021-01-22  5   2983     255     248               1        303.0   
1203  2021-01-25  1   2983     107     153             616        327.0   
1204  2021-01-26  2   2983      69     183             551        362.0   

                                                   조식메뉴  \
0     모닝롤/찐빵  우유/두유/주스 계란후라이  호두죽/쌀밥 (쌀:국내산) 된장찌개  쥐...   
1     모닝롤/단호박샌드  우유/두유/주스 계란후라이  팥죽/쌀밥 (쌀:국내산) 호박젓국찌...   
2     모닝롤/베이글  우유/두유/주스 계란후라이  표고버섯죽/쌀밥 (쌀:국내산) 콩나물국...   
3     모닝롤/토마토샌드  우유/두유/주스 계란후라이  닭죽/쌀밥 (쌀,닭:국내산) 근대국...   
4     모닝롤/와플  우유/두유/주스 계란후라이  쇠고기죽/쌀밥 (쌀:국내산) 재첩국  방...   
...                                                 ...   
1200  모닝롤/페퍼로니피자 우유/주스 계란후라이/찐계란 크루통크림스프/흑미밥 아귀지리 마늘...   
1201  모닝롤/생크림단팥빵 우유/주스 계란후라이/찐계란 누룽지탕/흑미밥 떡국 해물땡굴소스볶...   
1202  모닝롤/BLT샌드위치 우유/주스 계란후라이/찐계란 흑임자죽/흑미밥 바지락살국 두부조...   
1203  모닝롤/호박고구마오븐구이 우유/주스 계란후라이/찐계란 누룽지탕/흑미밥 감자양파국 분...   
1204  모닝롤/야채샌드 우유/주스 계란후라이/찐계란 참치죽/흑미밥 홍합탕 애호박새우젓볶음 ...   

                                                   중식메뉴  \
0     쌀밥/잡곡밥 (쌀,현미흑미:국내산) 오징어찌개  쇠불고기 (쇠고기:호주산) 계란찜 ...   
1     쌀밥/잡곡밥 (쌀,현미흑미:국내산) 김치찌개  가자미튀김  모둠소세지구이  마늘쫑무...   
2     카레덮밥 (쌀,현미흑미:국내산) 팽이장국  치킨핑거 (닭고기:국내산) 쫄면야채무침 ...   
3     쌀밥/잡곡밥 (쌀,현미흑미:국내산) 쇠고기무국  주꾸미볶음  부추전  시금치나물  ...   
4     쌀밥/잡곡밥 (쌀,현미흑미:국내산) 떡국  돈육씨앗강정 (돼지고기:국내산) 우엉잡채...   
...                                                 ...   
1200  쌀밥/흑미밥/찰현미밥 아욱국 수제함박스테이크 견과류마카로니범벅 생깻잎지 단호박물김치...   
1201  쌀밥/수수밥/찰현미밥 냉이된장국 동파육 봄동전 청경채/버섯숙회*초장 무생채 양상추샐...   
1202  전주비빔밥*약고추장 계란파국 요거닭 올방개묵무침 파프리카해초무침 포기김치 양상추샐러...   
1203  쌀밥/흑미밥/찰현미밥 전주식콩나물해장국 돈육간장불고기 깐풍연근 연두부*달래양념장 봄...   
1204  쌀밥/귀리밥/찰현미밥 들깨미역국 교촌간장치킨 옥수수콘치즈구이 가지고추장무침 포기김치...   

                                                   석식메뉴     중식계    석식계  월   일  \
0     쌀밥/잡곡밥 (쌀,현미흑미:국내산) 육개장  자반고등어구이  두부조림  건파래무침 ...  1039.0  331.0  2   1   
1     콩나물밥*양념장 (쌀,현미흑미:국내산) 어묵국  유산슬 (쇠고기:호주산) 아삭고추무...   867.0  560.0  2   2   
2     쌀밥/잡곡밥 (쌀,현미흑미:국내산) 청국장찌개  황태양념구이 (황태:러시아산) 고기...  1017.0  573.0  2   3   
3     미니김밥*겨자장 (쌀,현미흑미:국내산) 우동  멕시칸샐러드  군고구마  무피클  포...   978.0  525.0  2   4   
4     쌀밥/잡곡밥 (쌀,현미흑미:국내산) 차돌박이찌개 (쇠고기:호주산) 닭갈비 (닭고기:...   925.0  330.0  2   5   
...                                                 ...     ...    ... ..  ..   
1200     김치볶음밥 미니쫄우동*맛살튀김 브로콜리깨소스무침 계란후라이 고들빼기무침 겉절이김치   1093.0  421.0  1  20   
1201            흑미밥 쇠고기무국 삼치양념구이 비엔나채소볶음 숙주나물당근무침 포기김치    832.0  353.0  1  21   
1202        흑미밥 수제비국 수제맛쵸킹탕수육 유부채소겨자냉채 참나물무침 갓김치/겉절이김치    579.0  217.0  1  22   
1203            흑미밥 열무된장국 장어강정*데리야끼소스 깻잎쌈*생강채 오이선 포기김치   1145.0  502.0  1  25   
1204         (New)할라피뇨멸치주먹밥 잔치국수 수제고기육전 쑥갓나물 양파초절임 깍두기   1015.0  480.0  1  26   

         현재원  
0     2401.0  
1     2378.0  
2     2365.0  
3     2277.0  
4     2142.0  
...      ...  
1200  2319.0  
1201  2309.0  
1202  2177.0  
1203  2396.0  
1204  2369.0  

[1162 rows x 15 columns]
</pre>

```python
features = ['요일', '월', '일', '현재원',	'본사휴가자수',	'본사출장자수',	'본사시간외근무명령서승인건수',	'현본사소속재택근무자수']
train[features]
```

<pre>
     요일  월   일     현재원  본사휴가자수  본사출장자수  본사시간외근무명령서승인건수  현본사소속재택근무자수
0     1  2   1  2401.0      50     150             238          0.0
1     2  2   2  2378.0      50     173             319          0.0
2     3  2   3  2365.0      56     180             111          0.0
3     4  2   4  2277.0     104     220             355          0.0
4     5  2   5  2142.0     278     181              34          0.0
...  .. ..  ..     ...     ...     ...             ...          ...
1200  3  1  20  2319.0      75     198               4        391.0
1201  4  1  21  2309.0      92     231             462        351.0
1202  5  1  22  2177.0     255     248               1        303.0
1203  1  1  25  2396.0     107     153             616        327.0
1204  2  1  26  2369.0      69     183             551        362.0

[1162 rows x 8 columns]
</pre>

```python
# test에는 현재원 없음
test
```

<pre>
            일자 요일  본사정원수  본사휴가자수  본사출장자수  본사시간외근무명령서승인건수  현본사소속재택근무자수  \
0   2021-01-27  3   2983      88     182               5        358.0   
1   2021-01-28  4   2983     104     212             409        348.0   
2   2021-01-29  5   2983     270     249               0        294.0   
3   2021-02-01  1   2924     108     154             538        322.0   
4   2021-02-02  2   2924      62     186             455        314.0   
5   2021-02-03  3   2924      59     199               5        286.0   
6   2021-02-04  4   2924      61     211             476        288.0   
7   2021-02-05  5   2924     169     252               0        256.0   
8   2021-02-08  1   2924      88     174             690        329.0   
9   2021-02-09  2   2924      94     183             542        329.0   
10  2021-02-10  3   2924     489     134               0        233.0   
11  2021-02-15  1   2924     178     131             795        355.0   
12  2021-02-16  2   2924      70     175             815        413.0   
13  2021-02-17  3   2924      77     181               3        379.0   
14  2021-02-18  4   2924      83     247             594        338.0   
15  2021-02-19  5   2924     176     268               1        280.0   
16  2021-02-22  1   2924     105     197             814        247.0   
17  2021-02-23  2   2924      75     200             783        233.0   
18  2021-02-24  3   2924      77     235               3        234.0   
19  2021-02-25  4   2924      91     252             585        235.0   
20  2021-02-26  5   2924     261     279               1        179.0   
21  2021-03-02  2   2975     139     166             781        248.0   
22  2021-03-03  3   2975      50     195               1        292.0   
23  2021-03-04  4   2975      72     236             746        263.0   
24  2021-03-05  5   2975     158     257               2        226.0   
25  2021-03-08  1   2975      97     170             939        264.0   
26  2021-03-09  2   2975      76     170            1003        282.0   
27  2021-03-10  3   2975      71     185               1        271.0   
28  2021-03-11  4   2975      93     223             609        261.0   
29  2021-03-12  5   2975     241     240               0        251.0   
30  2021-03-15  1   2975     126     148             864        314.0   
31  2021-03-16  2   2975      74     176             658        401.0   
32  2021-03-17  3   2975      90     192               4        371.0   
33  2021-03-18  4   2975     106     231             520        351.0   
34  2021-03-19  5   2975     253     255               0        266.0   
35  2021-03-22  1   2975     133     166             707        350.0   
36  2021-03-23  2   2975      82     205             688        349.0   
37  2021-03-24  3   2975      87     234               0        314.0   
38  2021-03-25  4   2975     118     260             441        297.0   
39  2021-03-26  5   2975     311     266               0        229.0   
40  2021-03-29  1   2975     121     178             660        318.0   
41  2021-03-30  2   2975      83     198             625        313.0   
42  2021-03-31  3   2975      86     217               0        317.0   
43  2021-04-01  4   2973      88     256             394        303.0   
44  2021-04-02  5   2973     275     272               0        224.0   
45  2021-04-05  1   2973     125     174             704        331.0   
46  2021-04-06  2   2973      76     170             636        364.0   
47  2021-04-07  3   2973      96     214               1        334.0   
48  2021-04-08  4   2973     105     238             509        324.0   
49  2021-04-09  5   2973     259     268               0        229.0   

                                                 조식메뉴  \
0   모닝롤/연유버터베이글 우유/주스 계란후라이/찐계란 단호박죽/흑미밥 우거지국 고기완자...   
1   모닝롤/대만샌드위치 우유/주스 계란후라이/찐계란 누룽지탕/흑미밥 황태국 시래기지짐 ...   
2   모닝롤/핫케익 우유/주스 계란후라이/찐계란 오곡죽/흑미밥 매생이굴국 고구마순볶음 양...   
3   모닝롤/촉촉한치즈케익 우유/주스 계란후라이/찐계란 누룽지탕/흑미밥 두부김칫국 새우완...   
4   모닝롤/토마토샌드 우유/주스 계란후라이/찐계란 채소죽/흑미밥 호박맑은국 오이생채 양...   
5   모닝롤/게살모닝샌드 우유/주스 계란후라이/찐계란 소고기죽/흑미밥 시래기된장국 베이컨...   
6   모닝롤/사과파이 우유/주스 계란후라이/찐계란 누룽지탕/흑미밥 아욱국 새송이버섯곤약장...   
7   모닝롤/앙버터모닝빵 우유/주스 계란후라이/찐계란 고구마죽/흑미밥 옹심이국 머위나물무...   
8   모닝롤/스콘 우유/주스 계란후라이/찐계란 누룽지탕/흑미밥 꽃게탕 근대나물무침 연두부...   
9   모닝롤/치즈팡샌드 우유/주스 계란후라이/찐계란 팥죽/흑미밥 맑은버섯국 시금치나물무침...   
10  모닝롤/길거리토스트 우유/주스 계란후라이/찐계란 옥수수스프/흑미밥 우거지국 스팸구이...   
11  모닝롤/파운드케익 우유/주스 계란후라이/찐계란 누룽지탕/흑미밥 열무된장국 분홍소세지...   
12  모닝롤/모닝샌드 우유/주스 계란후라이/찐계란 흑임자죽/흑미밥 대구매운탕 가지나물 양...   
13  모닝롤/트위스터버거 우유/주스 계란후라이/찐계란 단호박크림스프/흑미밥 사골파국 양념...   
14  모닝롤/허니브레드 우유/주스 계란후라이/찐계란 누룽지탕/흑미밥 봄동된장국 참치채소볶...   
15  모닝롤/크로와상샌드위치 우유/주스 계란후라이/찐계란 쇠고기죽/흑미밥 닭살해장국 해물...   
16  모닝롤/흑미쌀찐빵 우유/주스 계란후라이 누룽지탕/흑미밥 미역국 매콤부들어묵볶음 양상...   
17  모닝롤/프렌치토스트 우유/주스 계란후라이 녹두죽/흑미밥 북어해장국 부추김무침 양상추...   
18  모닝롤/파게트 우유/주스 계란후라이 감자스프/흑미밥 시금치된장국 우엉조림 양상추샐러...   
19  모닝롤/야채모닝샌드 우유/주스 계란후라이 누룽지탕/흑미밥 맑은버섯국 수제동그랑땡전*...   
20  모닝롤/베이컨맥모닝 우유/주스 계란후라이 게살죽/흑미밥 매생이굴국 두부양념구이 양상...   
21  모닝롤/호떡 우유/주스 계란후라이 누룽지탕/흑미밥 애호박새우젓국 재래김*양념장 양상...   
22  모닝롤/크림치즈와플 우유/주스 계란후라이 고구마죽/흑미밥 사골우거지국 비엔나소세지볶...   
23  모닝롤/BLT샌드 우유/주스 계란후라이 누룽지탕/흑미밥 아귀매운탕 동초나물무침 양상...   
24  모닝롤/모닝사라다빵 우유/주스 계란후라이 낙지죽/흑미밥 감자국 멸치마늘종볶음 양상추...   
25  모닝롤/프레즐 우유/주스 계란후라이 누룽지탕/흑미밥 맑은버섯국 스팸구이 양상추샐러드...   
26  모닝롤/계란빵 우유/주스 계란후라이 채소죽/흑미밥 동태매운탕 모둠사태조림 양상추샐러...   
27  모닝롤/모닝샌드 우유/주스 계란후라이 팥죽/흑미밥 북엇국 방풍나물 양상추샐러드/사과...   
28  모닝롤/(New)당근크림치즈베이글 우유/주스 계란후라이 누룽지탕/흑미밥 조랭이떡국 ...   
29  모닝롤/토마토샌드 우유/주스 계란후라이 참치죽/흑미밥 꽃게탕 섭산적채소조림 양상추샐...   
30  모닝롤/고구마파이 우유/주스 계란후라이 누룽지탕/흑미밥 미역국 새우완자전*케찹 연두...   
31  모닝롤/미니햄버거 우유/주스 계란후라이 오곡죽/흑미밥 대구지리 생깻잎지 양상추샐러드...   
32  모닝롤/치즈볼 우유/주스 계란후라이 양송이스프/흑미밥 매운감자양파국 자반무침 양상추...   
33  모닝롤/(New)밤크림빵 우유/주스 계란후라이 누룽지탕/흑미밥 콩나물오징어국 고사리...   
34  모닝롤/인기가요샌드 우유/주스 계란후라이 흑임자죽/흑미밥 건새우아욱국 베이컨숙주볶음...   
35  모닝롤/치즈케익 우유/주스 계란후라이 누룽지탕/흑미밥 시금치된장국 캔꽁치무조림 양상...   
36  모닝롤/카야잼샌드 우유/주스 계란후라이 게살죽/흑미밥 들깨무채국 명엽채고추장볶음 양...   
37  모닝롤/크로와상샌드 우유/주스 계란후라이 흑미두부죽/흑미밥 냉이된장국 쇠고기꽈리고추...   
38  모닝롤/치아바타샌드 우유/주스 계란후라이 누룽지탕/흑미밥 쇠고기해장국 감자채볶음 양...   
39  모닝롤/베이컨에그슬럿 우유/주스 계란후라이 단호박죽/흑미밥 아귀매운탕 땅콩조림 양상...   
40  모닝롤/깨찰빵 우유/주스 계란후라이 누룽지탕/흑미밥 우거지국 마늘종호두조림 양상추샐...   
41  모닝롤/대만샌드위치 우유/주스 계란후라이 채소새우죽/흑미밥 옹심이국 멸치고추장볶음 ...   
42  모닝롤/모닝샌드 우유/주스 계란후라이 크루통크림스프/흑미밥 꽃게탕 건파래볶음 양상추...   
43  모닝롤/단호박피자빵 우유/주스 계란후라이 누룽지탕/흑미밥 북어해장국 달래오이무침 양...   
44  모닝롤/야채샌드위치 우유/주스 계란후라이 바지락죽/흑미밥 김칫국 비엔나구이*케찹 양...   
45  모닝롤/커피콩빵 우유/주스 계란후라이 누룽지탕/흑미밥 청양콩나물국 스팸구이 양상추샐...   
46  모닝롤/모닝샌드 우유/주스 계란후라이 고구마스프/흑미밥 아욱국 참치채소볶음 양상추샐...   
47  모닝롤/호떡맥모닝 우유/주스 계란후라이 팥죽/흑미밥 닭살해장국 우엉채조림 양상추샐러...   
48  모닝롤/크로크무슈 우유/주스 계란후라이 누룽지탕/흑미밥 감자국 두부양념조림 양상추샐...   
49  모닝롤/토마토샌드 우유/주스 계란후라이 채소죽/흑미밥 대구지리 애호박나물볶음 양상추...   

                                                 중식메뉴  \
0   쌀밥/흑미밥/찰현미밥 대구지리 매운돈갈비찜 오꼬노미계란말이 상추무침 포기김치 양상추...   
1   쌀밥/보리밥/찰현미밥 우렁된장찌개 오리주물럭 청양부추전 수제삼색무쌈 겉절이김치 양상...   
2   쌀밥/흑미밥/찰현미밥 팽이장국 수제돈까스*소스 가자미조림 동초나물무침 포기김치 양상...   
3   쌀밥/흑미밥/찰현미밥 배추들깨국 오리대패불고기 시금치프리타타 부추고추장무침 포기김치...   
4   쌀밥/팥밥/찰현미밥 부대찌개 닭살데리야끼조림 버섯탕수 세발나물무침 알타리김치/사과푸...   
5    쌀밥/흑미밥/찰현미밥 아욱국 매콤해물볶음 감자조림 미나리나물 포기김치 콥샐러드*렌치D    
6   쌀밥/차조밥/찰현미밥 설렁탕 고등어김치말이찜 볼어묵굴소스볶음 브로콜리숙회*초장 석박...   
7   쌀밥/흑미밥/찰현미밥 북엇국 닭볶음탕 채소전*장 솎음열무나물무침 포기김치 양상추샐러...   
8   쌀밥/흑미밥/찰현미밥 감자양파국 돈수육*씨앗쌈장 매콤어묵볶음 콩나물파채무침 포기김치...   
9   쌀밥/기장밥/찰현미밥 장각백숙 적어양념장구이 채소스틱*쌈장 도라지오이초무침 겉절이김...   
10  유니짜장밥 짬뽕국 수제찹쌀꿔바로우 계란후라이 단무지락교무침 포기김치 그린샐러드*딸기...   
11  쌀밥/흑미밥/찰현미밥 떡국 소갈비찜 한식잡채 참나물겉절이 포기김치 양상추샐러드*블루...   
12  쌀밥/수수밥/찰현미밥 육개장 닭살겨자냉채 오이스틱*쌈장 탕평채 깍두기/수박 양상추샐...   
13  쌀밥/흑미밥/찰현미밥 미니쌀국수 삼겹살고추장구이 스프링롤*타르타르D 동초나물무침 알...   
14  쌀밥/완두콩밥/찰현미밥 김치어묵탕 수원왕갈비통닭 두부양념조림 연근깨소스무침 포기김치...   
15  쌀밥/흑미밥/찰현미밥 유부장국 해물누룽지탕 김치전 마약계란장조림 포기김치 양상추샐러...   
16  쌀밥/흑미밥/찰현미밥 호박고추장찌개 안동찜닭 마카로니치즈범벅 세발나물무침 포기김치/...   
17    쌀밥/보리밥/찰현미밥 근대국 등갈비김치찜 감자채전*장 치커리무침 깍두기 파스타샐러드    
18  쌀밥/흑미밥/찰현미밥 해물탕 쇠고기숙주볶음 맛살계란말이 물미역초고추장무침 포기김치 ...   
19  쌀밥/흑미밥/찰현미밥 나주곰탕 생선까스*타르타르D 더덕양념구이 방풍나물무침 석박지 ...   
20  쌀밥/오곡밥/찰현미밥 옹심이국 목살스테이크 베이비크랩강정 이색나물(호박고지,건취나물...   
21  쌀밥/흑미밥/찰현미밥 아욱국 치즈불닭 베이컨감자볶음 매운콩나물무침 포기김치 양배추샐...   
22  쌀밥/흑미밥/찰현미밥 황태미역국 동파육 느타리버섯볶음 참나물상추겉절이 포기김치/망고...   
23  쌀밥/옥수수밥/찰현미밥 매운쇠고기샤브샤브국 갈치조림 수수부꾸미 쑥갓두부무침 알타리김...   
24  쌀밥/흑미밥/찰현미밥 쑥국 닭다리튀김 골뱅이채소무침 미나리나물 포기김치 양상추샐러드...   
25  쌀밥/흑미밥/찰현미밥 얼갈이된장국 오리불고기 (New)순대탕수 깻잎무쌈 포기김치 양...   
26  쌀밥/차조밥/찰현미밥 갈비탕 순살닭강정 매생이전 도라지오이생채 깍두기 양상추샐러드*...   
27    봄나물비빔밥 냉이된장국 수제고기육전 도토리묵*양념장 쥬시쿨 포기김치 콥샐러드*렌치D    
28  쌀밥/귀리밥/찰현미밥 콩가루배추국 타워함박스테이크 문어꽈리고추조림 시금치고추장나물무...   
29  쌀밥/흑미밥/찰현미밥 어묵매운탕 목살구이 쌈채소*쌈장 부추무침 겉절이김치 양상추샐러...   
30  쌀밥/흑미밥/찰현미밥 근대된장국 묵은지닭찜 비엔나브로콜리볶음 유부채소겨자냉채 깍두기...   
31  쌀밥/수수밥/찰현미밥 대파육개장 고등어구이*와사비장 어묵잡채 건다래순볶음 포기김치 ...   
32  쌀밥/흑미밥/찰현미밥 물만둣국 제육미나리볶음 두부까스*소스 아삭이고추된장무침 겉절이...   
33  쌀밥/기장밥/찰현미밥 열무된장국 장각허브오븐구이*청양마요소스 수제오미산적 머위나물 ...   
34  쌀밥/흑미밥/찰현미밥 버섯매운탕 돈갈비찜 (New)단호박계란찜 오이생채 포기김치 그...   
35  쌀밥/흑미밥/찰현미밥 황태국 콩나물불고기 쇠고기납작당면볶음 삼색유자청무침 포기김치 ...   
36  쌀밥/검정콩밥/찰현미밥 순남시래기국 장어강정*데리야끼소스 깻잎쌈*생강채 유채나물된장...   
37  쌀밥/흑미밥/찰현미밥 미역국 바베큐폭립 건새우호박채전 비름나물 포기김치 양상추샐러드...   
38  쌀밥/차조밥/찰현미밥 아욱국 짜파치킨 쫄면채소무침 취나물무침 포기김치 양배추샐러드*...   
39  쌀밥/흑미밥/찰현미밥 돈육김치찌개 소불고기 가지나물 풋마늘대무침 깍두기 양상추샐러드...   
40  쌀밥/흑미밥/찰현미밥 동태매운탕 차돌박이구이&청경채찜 메추리알떡볶이 세발나물무침 포...   
41  쌀밥/완두콩밥/찰현미밥 유부장국 돈수육 브로콜리땅콩소스무침 모듬채소*쌈장 수제보쌈김...   
42  쌀밥/흑미밥/찰현미밥 콩가루배추국 허니순살치킨 버섯초장무침 방풍나물 포기김치 양상추...   
43  쌀밥/보리밥/찰현미밥 순대국밥*다대기 해물동그랑땡채소볶음 통들깨부추무침 채소스틱 석...   
44  쌀밥/흑미밥/찰현미밥 닭개장 돈육춘장볶음 김말이강정 꼬시래기무침 포기김치 양상추샐러...   
45  쌀밥/흑미밥/찰현미밥 쇠고기미역국 춘천닭갈비 오지치즈후라이 가지두반장볶음 포기김치 ...   
46  쌀밥/귀리밥/찰현미밥 순두부백탕 매콤소갈비찜 깻잎완자전 돌나물초장무침 포기김치 시리...   
47  쌀밥/흑미밥/찰현미밥 냉이국 돈육간장불고기 비빔냉면 오이나물볶음 겉절이김치 양상추샐...   
48  쌀밥/옥수수밥/찰현미밥 맑은떡국 (New)로제찜닭 가자미구이*장 유채나물무침 포기김...   
49  쌀밥/흑미밥/찰현미밥 사골우거지국 해물누룽지탕 청포묵*양념간장 비름나물고추장무침 석...   

                                                 석식메뉴  월   일  
0       흑미밥 얼큰순두부찌개 쇠고기우엉볶음 버섯햄볶음 (New)아삭이고추무절임 포기김치   1  27  
1                 충무김밥 우동국물 오징어무침 꽃맛살샐러드 얼갈이쌈장무침 석박지   1  28  
2                 흑미밥 물만둣국 카레찜닭 숯불양념꼬지어묵 꼬시래기무침 포기김치   1  29  
3                흑미밥 동태탕 돈육꽈리고추장조림 당면채소무침 모자반무침 포기김치   2   1  
4            흑미밥 바지락살국 쇠고기청경채볶음 두부구이*볶은김치 머위된장무침 백김치   2   2  
5        오므라이스 가쓰오장국 빌소세지구이*구운채소 단감치커리무침 양념고추지 겉절이김치   2   3  
6          흑미밥 계란파국 돈육두루치기 감자채파프리카볶음 세발나물오리엔탈무침 포기김치   2   4  
7            유부초밥/추가밥 온메밀소바 국물떡볶이 순대찜*소금 청경채겉절이 포기김치   2   5  
8                      흑미밥 냉이국 반반치킨 꼬막채소무침 청경채찜 포기김치   2   8  
9                 흑미밥 미역국 매운소불고기 단호박두부탕수 메추리알장조림 석박지   2   9  
10            흑미밥 참치김치찌개 오징어굴소스볶음 차돌비빔국수 건새우무나물 포기김치   2  10  
11                흑미밥 순두부백탕 수제치킨까스 쫄면채소무침 얼갈이나물 포기김치   2  15  
12                 흑미밥 손수제비국 쇠고기낙지볶음 카레홍합찜 쑥갓나물 포기김치   2  16  
13              곤드레밥 황태국 찰떡떡갈비조림 계란후라이 재래김*달래양념장 무생채   2  17  
14            흑미밥 바지락된장찌개 제육볶음 양배추숙*쌈장 노가리고추조림 겉절이김치   2  18  
15            흑미밥 버섯들깨탕 아귀콩나물찜 콤비네이션피자 돌나물&된장소스 포기김치   2  19  
16                      흑미밥 동태알탕 깐풍육 고사리볶음 오이무침 포기김치   2  22  
17               흑미밥 쇠고기무국 춘전닭갈비 뉴욕핫도그 유채나물된장무침 포기김치   2  23  
18                 애플카레라이스 팽이장국 가지탕수 소떡소떡 오복지무침 포기김치   2  24  
19                흑미밥 계란파국 쭈꾸미불고기 모둠채소전*장 씨앗콩자반 포기김치   2  25  
20          흑미밥 스팸김치찌개 삼치구이*와사비장 브로콜리깨소스무침 연근조림 포기김치   2  26  
21               흑미밥 냉이김칫국 해물우동볶음 날치알계란찜 솎음열무나물 포기김치   3   2  
22      흑미밥 (New)수제오떡탕 매운족발볶음 크래미오이보트샐러드 청경채나물 겉절이김치   3   3  
23                  흑미밥 짬뽕국 쇠고기탕수 고추잡채*꽃빵 해초배무침 포기김치   3   4  
24         샐러드김밥 미소시루 라볶이 상추튀김(모둠튀김*양념장) 단무지채무침 포기김치   3   5  
25                 흑미밥 달래된장찌개 코코뱅 고구마치즈구이 치커리무침 포기김치   3   8  
26            흑미밥 맑은콩나물국 돈육김치볶음 수제두부동그랑땡 유채나물무침 포기김치   3   9  
27                흑미밥 순두부백탕 낙지볶음 쇠고기들깨소스무침 쪽파무침 포기김치   3  10  
28    꽁보리밥*볶음고추장 닭칼국수 왕만두찜*양념장 버섯맛살볶음 양파장아찌 얼갈이열무겉절이   3  11  
29               흑미밥 뼈해장국 가자미유린기 매운감자조림 배추흑임자무침 포기김치   3  12  
30                해물짜장면 계란파국 사천탕수육 세발나물무침 짜사이볶음 포기김치   3  15  
31      흑미밥 사골파국*소면사리 매콤돈육메추리알장조림 명엽채볶음 참나물초장무침 포기김치   3  16  
32          흑미밥 김칫국 닭살채소굴소스볶음 애호박나물 알배기,케일숙쌈*쌈장 포기김치   3  17  
33       쇠고기규동덮밥 가쓰오장국 (New)피자핫도그 연근땅콩조림 청경채겉절이 포기김치   3  18  
34                   흑미밥 부대찌개 삼치엿장구이 부추전 치커리사과무침 무생채   3  19  
35               흑미밥 순두부찌개 닭간장조림 매콤어묵볶음 미나리숙주나물 포기김치   3  22  
36            베이컨김치볶음밥 우동국물 알리오올리오 계란후라이 수제오이피클 포기김치   3  23  
37         흑미밥 맑은버섯국 오삼불고기 양상추, 쇠미역쌈*강된장 고들빼기무침 포기김치   3  24  
38               흑미밥 짬뽕수제비 생선까스*타르타르D 더덕무침 쑥갓무침 포기김치   3  25  
39       흑미밥/미니팥칼국수 차돌된장찌개 적어양념구이 미트볼채소볶음 오복지무침 포기김치   3  26  
40           셀프충무김밥 미소시루 오징어어묵무침 콩나물간장볶음 꽃맛살샐러드 포기김치   3  29  
41  오므라이스/추가밥 애호박새우젓국 빌소세지구이*구운채소 도토리묵채소무침 수제연근유자피...  3  30  
42             흑미밥 쇠고기무국 마파두부소스 납작군만두*장 참나물생채무침 포기김치   3  31  
43                 흑미밥 미니우동 치킨까스김치나베 미나리전 양념고추지 열무김치   4   1  
44                 흑미밥 근대국 코다리무조림 오꼬노미계란말이 상추무침 포기김치   4   2  
45                    흑미밥 돈육고추장찌개 갈치구이 김치전 취나물무침 깍두기   4   5  
46           추가밥 짬뽕*생면 수제찹쌀꿔바로우 메추리알곤약장조림 단무지무침 포기김치   4   6  
47           단호박카레라이스 시금치된장국 소떡소떡 파프리카해초무침 감귤쥬스 포기김치   4   7  
48                흑미밥 어묵매운탕 쇠고기숙주볶음 채소계란찜 쑥갓생무침 김치볶음   4   8  
49             흑미밥 맑은버섯국 매운사태조림 춘권*타르타르D 열무나물무침 포기김치   4   9  
</pre>

```python
test['현재원'] = test['본사정원수'] - test['본사휴가자수'] - test['본사출장자수'] - test['현본사소속재택근무자수']
test[features]
```

<pre>
   요일  월   일     현재원  본사휴가자수  본사출장자수  본사시간외근무명령서승인건수  현본사소속재택근무자수
0   3  1  27  2355.0      88     182               5        358.0
1   4  1  28  2319.0     104     212             409        348.0
2   5  1  29  2170.0     270     249               0        294.0
3   1  2   1  2340.0     108     154             538        322.0
4   2  2   2  2362.0      62     186             455        314.0
5   3  2   3  2380.0      59     199               5        286.0
6   4  2   4  2364.0      61     211             476        288.0
7   5  2   5  2247.0     169     252               0        256.0
8   1  2   8  2333.0      88     174             690        329.0
9   2  2   9  2318.0      94     183             542        329.0
10  3  2  10  2068.0     489     134               0        233.0
11  1  2  15  2260.0     178     131             795        355.0
12  2  2  16  2266.0      70     175             815        413.0
13  3  2  17  2287.0      77     181               3        379.0
14  4  2  18  2256.0      83     247             594        338.0
15  5  2  19  2200.0     176     268               1        280.0
16  1  2  22  2375.0     105     197             814        247.0
17  2  2  23  2416.0      75     200             783        233.0
18  3  2  24  2378.0      77     235               3        234.0
19  4  2  25  2346.0      91     252             585        235.0
20  5  2  26  2205.0     261     279               1        179.0
21  2  3   2  2422.0     139     166             781        248.0
22  3  3   3  2438.0      50     195               1        292.0
23  4  3   4  2404.0      72     236             746        263.0
24  5  3   5  2334.0     158     257               2        226.0
25  1  3   8  2444.0      97     170             939        264.0
26  2  3   9  2447.0      76     170            1003        282.0
27  3  3  10  2448.0      71     185               1        271.0
28  4  3  11  2398.0      93     223             609        261.0
29  5  3  12  2243.0     241     240               0        251.0
30  1  3  15  2387.0     126     148             864        314.0
31  2  3  16  2324.0      74     176             658        401.0
32  3  3  17  2322.0      90     192               4        371.0
33  4  3  18  2287.0     106     231             520        351.0
34  5  3  19  2201.0     253     255               0        266.0
35  1  3  22  2326.0     133     166             707        350.0
36  2  3  23  2339.0      82     205             688        349.0
37  3  3  24  2340.0      87     234               0        314.0
38  4  3  25  2300.0     118     260             441        297.0
39  5  3  26  2169.0     311     266               0        229.0
40  1  3  29  2358.0     121     178             660        318.0
41  2  3  30  2381.0      83     198             625        313.0
42  3  3  31  2355.0      86     217               0        317.0
43  4  4   1  2326.0      88     256             394        303.0
44  5  4   2  2202.0     275     272               0        224.0
45  1  4   5  2343.0     125     174             704        331.0
46  2  4   6  2363.0      76     170             636        364.0
47  3  4   7  2329.0      96     214               1        334.0
48  4  4   8  2306.0     105     238             509        324.0
49  5  4   9  2217.0     259     268               0        229.0
</pre>
### 1) 중식계 예측 모델



```python
X = train[features]
y = train['중식계']

from sklearn.tree import DecisionTreeRegressor
lunch_model = DecisionTreeRegressor()

lunch_model.fit(X, y)

lunch_count_predict = lunch_model.predict(test[features])
```

### 2) 석식계 예측 모델



```python
features
```

<pre>
['요일', '월', '일', '현재원', '본사휴가자수', '본사출장자수', '본사시간외근무명령서승인건수', '현본사소속재택근무자수']
</pre>

```python
features.append('중식계')
features
```

<pre>
['요일',
 '월',
 '일',
 '현재원',
 '본사휴가자수',
 '본사출장자수',
 '본사시간외근무명령서승인건수',
 '현본사소속재택근무자수',
 '중식계']
</pre>

```python
# test에는 중식계가 없어서 에러가 남

X = train[features]
y = train['석식계']

from sklearn.tree import DecisionTreeRegressor
dinner_model = DecisionTreeRegressor()

dinner_model.fit(X, y)

dinner_count_predict = dinner_model.predict(test[features])
```


```python
test['중식계'] = lunch_count_predict
test[features]
```

<pre>
   요일  월   일     현재원  본사휴가자수  본사출장자수  본사시간외근무명령서승인건수  현본사소속재택근무자수     중식계
0   3  1  27  2355.0      88     182               5        358.0  1128.0
1   4  1  28  2319.0     104     212             409        348.0   963.0
2   5  1  29  2170.0     270     249               0        294.0   394.0
3   1  2   1  2340.0     108     154             538        322.0  1329.0
4   2  2   2  2362.0      62     186             455        314.0   867.0
5   3  2   3  2380.0      59     199               5        286.0   949.0
6   4  2   4  2364.0      61     211             476        288.0  1005.0
7   5  2   5  2247.0     169     252               0        256.0   661.0
8   1  2   8  2333.0      88     174             690        329.0  1326.0
9   2  2   9  2318.0      94     183             542        329.0  1128.0
10  3  2  10  2068.0     489     134               0        233.0  1022.0
11  1  2  15  2260.0     178     131             795        355.0  1273.0
12  2  2  16  2266.0      70     175             815        413.0  1202.0
13  3  2  17  2287.0      77     181               3        379.0  1093.0
14  4  2  18  2256.0      83     247             594        338.0   797.0
15  5  2  19  2200.0     176     268               1        280.0   722.0
16  1  2  22  2375.0     105     197             814        247.0  1142.0
17  2  2  23  2416.0      75     200             783        233.0  1042.0
18  3  2  24  2378.0      77     235               3        234.0   831.0
19  4  2  25  2346.0      91     252             585        235.0   740.0
20  5  2  26  2205.0     261     279               1        179.0   757.0
21  2  3   2  2422.0     139     166             781        248.0  1083.0
22  3  3   3  2438.0      50     195               1        292.0   949.0
23  4  3   4  2404.0      72     236             746        263.0   959.0
24  5  3   5  2334.0     158     257               2        226.0   620.0
25  1  3   8  2444.0      97     170             939        264.0  1145.0
26  2  3   9  2447.0      76     170            1003        282.0  1319.0
27  3  3  10  2448.0      71     185               1        271.0   967.0
28  4  3  11  2398.0      93     223             609        261.0   858.0
29  5  3  12  2243.0     241     240               0        251.0   929.0
30  1  3  15  2387.0     126     148             864        314.0  1186.0
31  2  3  16  2324.0      74     176             658        401.0   913.0
32  3  3  17  2322.0      90     192               4        371.0  1128.0
33  4  3  18  2287.0     106     231             520        351.0   969.0
34  5  3  19  2201.0     253     255               0        266.0   722.0
35  1  3  22  2326.0     133     166             707        350.0  1257.0
36  2  3  23  2339.0      82     205             688        349.0   831.0
37  3  3  24  2340.0      87     234               0        314.0   958.0
38  4  3  25  2300.0     118     260             441        297.0   971.0
39  5  3  26  2169.0     311     266               0        229.0   462.0
40  1  3  29  2358.0     121     178             660        318.0  1110.0
41  2  3  30  2381.0      83     198             625        313.0  1083.0
42  3  3  31  2355.0      86     217               0        317.0   958.0
43  4  4   1  2326.0      88     256             394        303.0   637.0
44  5  4   2  2202.0     275     272               0        224.0   459.0
45  1  4   5  2343.0     125     174             704        331.0  1329.0
46  2  4   6  2363.0      76     170             636        364.0   761.0
47  3  4   7  2329.0      96     214               1        334.0  1235.0
48  4  4   8  2306.0     105     238             509        324.0   740.0
49  5  4   9  2217.0     259     268               0        229.0   867.0
</pre>

```python
# test에는 중식계가 없어서 에러가 남

X = train[features]
y = train['석식계']

from sklearn.tree import DecisionTreeRegressor
dinner_model = DecisionTreeRegressor()

dinner_model.fit(X, y)

dinner_count_predict = dinner_model.predict(test[features])
```

### 3) 제출



```python
submission['중식계'] = lunch_count_predict
submission['석식계'] = dinner_count_predict
submission
```

<pre>
            일자     중식계    석식계
0   2021-01-27  1128.0  421.0
1   2021-01-28   963.0  480.0
2   2021-01-29   394.0  231.0
3   2021-02-01  1329.0  609.0
4   2021-02-02   867.0  502.0
5   2021-02-03   949.0  427.0
6   2021-02-04  1005.0  647.0
7   2021-02-05   661.0  341.0
8   2021-02-08  1326.0  771.0
9   2021-02-09  1128.0  554.0
10  2021-02-10  1022.0  123.0
11  2021-02-15  1273.0  767.0
12  2021-02-16  1202.0  595.0
13  2021-02-17  1093.0  450.0
14  2021-02-18   797.0  424.0
15  2021-02-19   722.0  341.0
16  2021-02-22  1142.0  704.0
17  2021-02-23  1042.0  653.0
18  2021-02-24   831.0  403.0
19  2021-02-25   740.0  424.0
20  2021-02-26   757.0  280.0
21  2021-03-02  1083.0  651.0
22  2021-03-03   949.0  427.0
23  2021-03-04   959.0  646.0
24  2021-03-05   620.0  371.0
25  2021-03-08  1145.0  597.0
26  2021-03-09  1319.0  772.0
27  2021-03-10   967.0  466.0
28  2021-03-11   858.0  502.0
29  2021-03-12   929.0  220.0
30  2021-03-15  1186.0  633.0
31  2021-03-16   913.0  520.0
32  2021-03-17  1128.0  450.0
33  2021-03-18   969.0  610.0
34  2021-03-19   722.0  217.0
35  2021-03-22  1257.0  673.0
36  2021-03-23   831.0  502.0
37  2021-03-24   958.0  537.0
38  2021-03-25   971.0  593.0
39  2021-03-26   462.0  231.0
40  2021-03-29  1110.0  651.0
41  2021-03-30  1083.0  754.0
42  2021-03-31   958.0  526.0
43  2021-04-01   637.0  353.0
44  2021-04-02   459.0  276.0
45  2021-04-05  1329.0  771.0
46  2021-04-06   761.0  421.0
47  2021-04-07  1235.0  450.0
48  2021-04-08   740.0  424.0
49  2021-04-09   867.0  220.0
</pre>

```python
submission.to_csv('submission.csv', index=False)
```

### 4) 결과



ppt


## 4.변수중요도를 이용한 가설검정


### 1) 중식계 변수중요도



```python
features
```

<pre>
['요일',
 '월',
 '일',
 '현재원',
 '본사휴가자수',
 '본사출장자수',
 '본사시간외근무명령서승인건수',
 '현본사소속재택근무자수',
 '중식계']
</pre>

```python
features = features[:-1]
features
```

<pre>
['요일', '월', '일', '현재원', '본사휴가자수', '본사출장자수', '본사시간외근무명령서승인건수', '현본사소속재택근무자수']
</pre>

```python
lunch_model.feature_importances_
```

<pre>
array([0.58963223, 0.03810055, 0.02499906, 0.04274271, 0.15652819,
       0.0773349 , 0.06118644, 0.00947592])
</pre>

```python
x = train[features].columns
y = lunch_model.feature_importances_

plt.figure(dpi=150)
plt.xticks(rotation=90)

plt.xlabel('중식계 예측 모델의 변수중요도')
plt.ylabel('변수 명')

plt.bar(x,y)
plt.show()
```

<pre>
<Figure size 900x600 with 1 Axes>
</pre>

```python
x = train[features].columns
y = lunch_model.feature_importances_

plt.figure(dpi=150)
# plt.xticks(rotation=90)

plt.xlabel('중식계 예측 모델의 변수중요도')
plt.ylabel('변수 명')

plt.barh(x,y)
plt.show()
```

<pre>
<Figure size 900x600 with 1 Axes>
</pre>
### 2) 석식계 변수중요도



```python
features
```

<pre>
['요일', '월', '일', '현재원', '본사휴가자수', '본사출장자수', '본사시간외근무명령서승인건수', '현본사소속재택근무자수']
</pre>

```python
features.append('중식계')
features
```

<pre>
['요일',
 '월',
 '일',
 '현재원',
 '본사휴가자수',
 '본사출장자수',
 '본사시간외근무명령서승인건수',
 '현본사소속재택근무자수',
 '중식계']
</pre>

```python
x = train[features].columns
y = dinner_model.feature_importances_

plt.figure(dpi=150)
# plt.xticks(rotation=90)

plt.xlabel('석식계 예측 모델의 변수중요도')
plt.ylabel('변수 명')

plt.barh(x,y)
plt.show()
```

<pre>
<Figure size 900x600 with 1 Axes>
</pre>
# 모델 선택, 모델 튜닝



PPT



더 나은 성능? 


## 1.데이터 다시 로드, 전처리



```python
train = pd.read_csv('/content/drive/MyDrive/구내식당/train.csv')
test = pd.read_csv('/content/drive/MyDrive/구내식당/test.csv')
submission = pd.read_csv('/content/drive/MyDrive/구내식당/sample_submission.csv')
```


```python
# 석식 이용 인원 0인 날 삭제
train = train[train['석식계'] != 0]

# 요일 숫자로 변경
train.loc[train['요일'] == '월', '요일'] = 1
train.loc[train['요일'] == '화', '요일'] = 2
train.loc[train['요일'] == '수', '요일'] = 3
train.loc[train['요일'] == '목', '요일'] = 4
train.loc[train['요일'] == '금', '요일'] = 5

# 월 칼럼 추가
def month(text:str):
  return int(text[5:7])
train['월'] = train['일자'].map(month)

# 일 칼럼 추가
def day(text:str):
  return int(text[-2:])
train['일'] = train['일자'].map(day)

# 현재원 칼럼 추가
train['현재원'] = train['본사정원수'] - train['본사휴가자수'] - train['본사출장자수'] - train['현본사소속재택근무자수']

train.head()
```

<pre>
           일자 요일  본사정원수  본사휴가자수  본사출장자수  본사시간외근무명령서승인건수  현본사소속재택근무자수  \
0  2016-02-01  1   2601      50     150             238          0.0   
1  2016-02-02  2   2601      50     173             319          0.0   
2  2016-02-03  3   2601      56     180             111          0.0   
3  2016-02-04  4   2601     104     220             355          0.0   
4  2016-02-05  5   2601     278     181              34          0.0   

                                                조식메뉴  \
0  모닝롤/찐빵  우유/두유/주스 계란후라이  호두죽/쌀밥 (쌀:국내산) 된장찌개  쥐...   
1  모닝롤/단호박샌드  우유/두유/주스 계란후라이  팥죽/쌀밥 (쌀:국내산) 호박젓국찌...   
2  모닝롤/베이글  우유/두유/주스 계란후라이  표고버섯죽/쌀밥 (쌀:국내산) 콩나물국...   
3  모닝롤/토마토샌드  우유/두유/주스 계란후라이  닭죽/쌀밥 (쌀,닭:국내산) 근대국...   
4  모닝롤/와플  우유/두유/주스 계란후라이  쇠고기죽/쌀밥 (쌀:국내산) 재첩국  방...   

                                                중식메뉴  \
0  쌀밥/잡곡밥 (쌀,현미흑미:국내산) 오징어찌개  쇠불고기 (쇠고기:호주산) 계란찜 ...   
1  쌀밥/잡곡밥 (쌀,현미흑미:국내산) 김치찌개  가자미튀김  모둠소세지구이  마늘쫑무...   
2  카레덮밥 (쌀,현미흑미:국내산) 팽이장국  치킨핑거 (닭고기:국내산) 쫄면야채무침 ...   
3  쌀밥/잡곡밥 (쌀,현미흑미:국내산) 쇠고기무국  주꾸미볶음  부추전  시금치나물  ...   
4  쌀밥/잡곡밥 (쌀,현미흑미:국내산) 떡국  돈육씨앗강정 (돼지고기:국내산) 우엉잡채...   

                                                석식메뉴     중식계    석식계  월  일  \
0  쌀밥/잡곡밥 (쌀,현미흑미:국내산) 육개장  자반고등어구이  두부조림  건파래무침 ...  1039.0  331.0  2  1   
1  콩나물밥*양념장 (쌀,현미흑미:국내산) 어묵국  유산슬 (쇠고기:호주산) 아삭고추무...   867.0  560.0  2  2   
2  쌀밥/잡곡밥 (쌀,현미흑미:국내산) 청국장찌개  황태양념구이 (황태:러시아산) 고기...  1017.0  573.0  2  3   
3  미니김밥*겨자장 (쌀,현미흑미:국내산) 우동  멕시칸샐러드  군고구마  무피클  포...   978.0  525.0  2  4   
4  쌀밥/잡곡밥 (쌀,현미흑미:국내산) 차돌박이찌개 (쇠고기:호주산) 닭갈비 (닭고기:...   925.0  330.0  2  5   

      현재원  
0  2401.0  
1  2378.0  
2  2365.0  
3  2277.0  
4  2142.0  
</pre>

```python
# 요일 숫자로 변경
test.loc[test['요일'] == '월', '요일'] = 1
test.loc[test['요일'] == '화', '요일'] = 2
test.loc[test['요일'] == '수', '요일'] = 3
test.loc[test['요일'] == '목', '요일'] = 4
test.loc[test['요일'] == '금', '요일'] = 5

# 월 칼럼 추가
def month(text:str):
  return int(text[5:7])
test['월'] = test['일자'].map(month)

# 일 칼럼 추가
def day(text:str):
  return int(text[-2:])
test['일'] = test['일자'].map(day)

# 현재원 칼럼 추가
test['현재원'] = test['본사정원수'] - test['본사휴가자수'] - test['본사출장자수'] - test['현본사소속재택근무자수']

test.head()
```

<pre>
           일자 요일  본사정원수  본사휴가자수  본사출장자수  본사시간외근무명령서승인건수  현본사소속재택근무자수  \
0  2021-01-27  3   2983      88     182               5        358.0   
1  2021-01-28  4   2983     104     212             409        348.0   
2  2021-01-29  5   2983     270     249               0        294.0   
3  2021-02-01  1   2924     108     154             538        322.0   
4  2021-02-02  2   2924      62     186             455        314.0   

                                                조식메뉴  \
0  모닝롤/연유버터베이글 우유/주스 계란후라이/찐계란 단호박죽/흑미밥 우거지국 고기완자...   
1  모닝롤/대만샌드위치 우유/주스 계란후라이/찐계란 누룽지탕/흑미밥 황태국 시래기지짐 ...   
2  모닝롤/핫케익 우유/주스 계란후라이/찐계란 오곡죽/흑미밥 매생이굴국 고구마순볶음 양...   
3  모닝롤/촉촉한치즈케익 우유/주스 계란후라이/찐계란 누룽지탕/흑미밥 두부김칫국 새우완...   
4  모닝롤/토마토샌드 우유/주스 계란후라이/찐계란 채소죽/흑미밥 호박맑은국 오이생채 양...   

                                                중식메뉴  \
0  쌀밥/흑미밥/찰현미밥 대구지리 매운돈갈비찜 오꼬노미계란말이 상추무침 포기김치 양상추...   
1  쌀밥/보리밥/찰현미밥 우렁된장찌개 오리주물럭 청양부추전 수제삼색무쌈 겉절이김치 양상...   
2  쌀밥/흑미밥/찰현미밥 팽이장국 수제돈까스*소스 가자미조림 동초나물무침 포기김치 양상...   
3  쌀밥/흑미밥/찰현미밥 배추들깨국 오리대패불고기 시금치프리타타 부추고추장무침 포기김치...   
4  쌀밥/팥밥/찰현미밥 부대찌개 닭살데리야끼조림 버섯탕수 세발나물무침 알타리김치/사과푸...   

                                            석식메뉴  월   일     현재원  
0  흑미밥 얼큰순두부찌개 쇠고기우엉볶음 버섯햄볶음 (New)아삭이고추무절임 포기김치   1  27  2355.0  
1            충무김밥 우동국물 오징어무침 꽃맛살샐러드 얼갈이쌈장무침 석박지   1  28  2319.0  
2            흑미밥 물만둣국 카레찜닭 숯불양념꼬지어묵 꼬시래기무침 포기김치   1  29  2170.0  
3           흑미밥 동태탕 돈육꽈리고추장조림 당면채소무침 모자반무침 포기김치   2   1  2340.0  
4       흑미밥 바지락살국 쇠고기청경채볶음 두부구이*볶은김치 머위된장무침 백김치   2   2  2362.0  
</pre>
## 2.의사결정나무



- 시간 없으면 패스하기


### 1) 중식계 예측 모델



```python
features = ['요일', '월', '일', '현재원',	'본사휴가자수',	'본사출장자수',	'본사시간외근무명령서승인건수',	'현본사소속재택근무자수']
train[features]
```

<pre>
     요일  월   일     현재원  본사휴가자수  본사출장자수  본사시간외근무명령서승인건수  현본사소속재택근무자수
0     1  2   1  2401.0      50     150             238          0.0
1     2  2   2  2378.0      50     173             319          0.0
2     3  2   3  2365.0      56     180             111          0.0
3     4  2   4  2277.0     104     220             355          0.0
4     5  2   5  2142.0     278     181              34          0.0
...  .. ..  ..     ...     ...     ...             ...          ...
1200  3  1  20  2319.0      75     198               4        391.0
1201  4  1  21  2309.0      92     231             462        351.0
1202  5  1  22  2177.0     255     248               1        303.0
1203  1  1  25  2396.0     107     153             616        327.0
1204  2  1  26  2369.0      69     183             551        362.0

[1162 rows x 8 columns]
</pre>

```python
X = train[features]
y = train['중식계']

lunch_model = DecisionTreeRegressor()

lunch_model.fit(X,y)

lunch_count_predict = lunch_model.predict(test[features])

plt.figure(dpi=150)

plt.plot(lunch_count_predict, label='pred')
plt.legend()
plt.show()
```

<pre>
<Figure size 900x600 with 1 Axes>
</pre>
### 2) 석식계 예측 모델



```python
features
```

<pre>
['요일', '월', '일', '현재원', '본사휴가자수', '본사출장자수', '본사시간외근무명령서승인건수', '현본사소속재택근무자수']
</pre>

```python
features.append('중식계')
features
```

<pre>
['요일',
 '월',
 '일',
 '현재원',
 '본사휴가자수',
 '본사출장자수',
 '본사시간외근무명령서승인건수',
 '현본사소속재택근무자수',
 '중식계']
</pre>

```python
test['중식계'] = lunch_count_predict
test[features]
```

<pre>
   요일  월   일     현재원  본사휴가자수  본사출장자수  본사시간외근무명령서승인건수  현본사소속재택근무자수     중식계
0   3  1  27  2355.0      88     182               5        358.0  1093.0
1   4  1  28  2319.0     104     212             409        348.0   963.0
2   5  1  29  2170.0     270     249               0        294.0   394.0
3   1  2   1  2340.0     108     154             538        322.0  1256.0
4   2  2   2  2362.0      62     186             455        314.0  1015.0
5   3  2   3  2380.0      59     199               5        286.0   949.0
6   4  2   4  2364.0      61     211             476        288.0  1005.0
7   5  2   5  2247.0     169     252               0        256.0   620.0
8   1  2   8  2333.0      88     174             690        329.0  1364.0
9   2  2   9  2318.0      94     183             542        329.0  1128.0
10  3  2  10  2068.0     489     134               0        233.0  1022.0
11  1  2  15  2260.0     178     131             795        355.0  1329.0
12  2  2  16  2266.0      70     175             815        413.0  1202.0
13  3  2  17  2287.0      77     181               3        379.0  1093.0
14  4  2  18  2256.0      83     247             594        338.0   959.0
15  5  2  19  2200.0     176     268               1        280.0   722.0
16  1  2  22  2375.0     105     197             814        247.0  1142.0
17  2  2  23  2416.0      75     200             783        233.0  1074.0
18  3  2  24  2378.0      77     235               3        234.0   831.0
19  4  2  25  2346.0      91     252             585        235.0   731.0
20  5  2  26  2205.0     261     279               1        179.0   722.0
21  2  3   2  2422.0     139     166             781        248.0  1074.0
22  3  3   3  2438.0      50     195               1        292.0   867.0
23  4  3   4  2404.0      72     236             746        263.0   829.0
24  5  3   5  2334.0     158     257               2        226.0   661.0
25  1  3   8  2444.0      97     170             939        264.0  1186.0
26  2  3   9  2447.0      76     170            1003        282.0  1324.0
27  3  3  10  2448.0      71     185               1        271.0   967.0
28  4  3  11  2398.0      93     223             609        261.0   923.0
29  5  3  12  2243.0     241     240               0        251.0   929.0
30  1  3  15  2387.0     126     148             864        314.0  1186.0
31  2  3  16  2324.0      74     176             658        401.0   913.0
32  3  3  17  2322.0      90     192               4        371.0  1093.0
33  4  3  18  2287.0     106     231             520        351.0   969.0
34  5  3  19  2201.0     253     255               0        266.0   722.0
35  1  3  22  2326.0     133     166             707        350.0  1256.0
36  2  3  23  2339.0      82     205             688        349.0   831.0
37  3  3  24  2340.0      87     234               0        314.0   958.0
38  4  3  25  2300.0     118     260             441        297.0   832.0
39  5  3  26  2169.0     311     266               0        229.0   462.0
40  1  3  29  2358.0     121     178             660        318.0  1110.0
41  2  3  30  2381.0      83     198             625        313.0  1074.0
42  3  3  31  2355.0      86     217               0        317.0   958.0
43  4  4   1  2326.0      88     256             394        303.0   637.0
44  5  4   2  2202.0     275     272               0        224.0   459.0
45  1  4   5  2343.0     125     174             704        331.0  1256.0
46  2  4   6  2363.0      76     170             636        364.0   809.0
47  3  4   7  2329.0      96     214               1        334.0  1235.0
48  4  4   8  2306.0     105     238             509        324.0   731.0
49  5  4   9  2217.0     259     268               0        229.0   867.0
</pre>

```python
X = train[features]
y = train['석식계']

dinner_model = DecisionTreeRegressor()

dinner_model.fit(X,y)

dinner_count_predict = dinner_model.predict(test[features])

plt.figure(dpi=150)

plt.plot(dinner_count_predict, label='pred')
plt.legend()
plt.show()
```

<pre>
<Figure size 900x600 with 1 Axes>
</pre>
### 3) 제출



```python
# 아까 제출한 학생들은 제출 ㄴㄴ
submission['중식계'] = lunch_count_predict
submission['석식계'] = dinner_count_predict
submission.to_csv('submission.csv', index=False)
```

## 3.여러 모델 사용해보기 - 랜덤포레스트


### 1) 중식계 예측 모델



```python
features = features[:-1]

X = train[features]
y = train['중식계']

from sklearn.ensemble import RandomForestRegressor

# 1. 모델 정의
lunch_model = RandomForestRegressor()

# 2. 모델 학습
# fit() 메소드 이용
lunch_model.fit(X,y)

# 3. 예측
# predict() 메소드 이용
lunch_count_predict = lunch_model.predict(test[features])

plt.figure(dpi=150)
plt.plot(lunch_count_predict, alpha=0.6, label='pred')
plt.legend()
plt.show()
```

<pre>
<Figure size 900x600 with 1 Axes>
</pre>
#### a) 랜덤포레스트 모델 시각화



```python
lunch_model.estimators_
```

<pre>
[DecisionTreeRegressor(max_features='auto', random_state=1397535753),
 DecisionTreeRegressor(max_features='auto', random_state=1734667666),
 DecisionTreeRegressor(max_features='auto', random_state=244027169),
 DecisionTreeRegressor(max_features='auto', random_state=447421621),
 DecisionTreeRegressor(max_features='auto', random_state=464473774),
 DecisionTreeRegressor(max_features='auto', random_state=1038727066),
 DecisionTreeRegressor(max_features='auto', random_state=106432401),
 DecisionTreeRegressor(max_features='auto', random_state=1175112597),
 DecisionTreeRegressor(max_features='auto', random_state=368374667),
 DecisionTreeRegressor(max_features='auto', random_state=1585862393),
 DecisionTreeRegressor(max_features='auto', random_state=1565221410),
 DecisionTreeRegressor(max_features='auto', random_state=1481161548),
 DecisionTreeRegressor(max_features='auto', random_state=1225332361),
 DecisionTreeRegressor(max_features='auto', random_state=475539000),
 DecisionTreeRegressor(max_features='auto', random_state=1074633195),
 DecisionTreeRegressor(max_features='auto', random_state=440337628),
 DecisionTreeRegressor(max_features='auto', random_state=1195792048),
 DecisionTreeRegressor(max_features='auto', random_state=2103195418),
 DecisionTreeRegressor(max_features='auto', random_state=1425628770),
 DecisionTreeRegressor(max_features='auto', random_state=100730381),
 DecisionTreeRegressor(max_features='auto', random_state=327462367),
 DecisionTreeRegressor(max_features='auto', random_state=403668136),
 DecisionTreeRegressor(max_features='auto', random_state=495919362),
 DecisionTreeRegressor(max_features='auto', random_state=1280766803),
 DecisionTreeRegressor(max_features='auto', random_state=1377570856),
 DecisionTreeRegressor(max_features='auto', random_state=790094210),
 DecisionTreeRegressor(max_features='auto', random_state=41152605),
 DecisionTreeRegressor(max_features='auto', random_state=1006647119),
 DecisionTreeRegressor(max_features='auto', random_state=958073150),
 DecisionTreeRegressor(max_features='auto', random_state=266891132),
 DecisionTreeRegressor(max_features='auto', random_state=1973061810),
 DecisionTreeRegressor(max_features='auto', random_state=29162122),
 DecisionTreeRegressor(max_features='auto', random_state=376076498),
 DecisionTreeRegressor(max_features='auto', random_state=2066395719),
 DecisionTreeRegressor(max_features='auto', random_state=1658632286),
 DecisionTreeRegressor(max_features='auto', random_state=23759299),
 DecisionTreeRegressor(max_features='auto', random_state=719842788),
 DecisionTreeRegressor(max_features='auto', random_state=1019503227),
 DecisionTreeRegressor(max_features='auto', random_state=371021683),
 DecisionTreeRegressor(max_features='auto', random_state=1529478755),
 DecisionTreeRegressor(max_features='auto', random_state=733552471),
 DecisionTreeRegressor(max_features='auto', random_state=495842074),
 DecisionTreeRegressor(max_features='auto', random_state=438598262),
 DecisionTreeRegressor(max_features='auto', random_state=1743589825),
 DecisionTreeRegressor(max_features='auto', random_state=1177910176),
 DecisionTreeRegressor(max_features='auto', random_state=339930712),
 DecisionTreeRegressor(max_features='auto', random_state=1120985046),
 DecisionTreeRegressor(max_features='auto', random_state=339655720),
 DecisionTreeRegressor(max_features='auto', random_state=934077407),
 DecisionTreeRegressor(max_features='auto', random_state=1237797361),
 DecisionTreeRegressor(max_features='auto', random_state=421684149),
 DecisionTreeRegressor(max_features='auto', random_state=1243255747),
 DecisionTreeRegressor(max_features='auto', random_state=435186289),
 DecisionTreeRegressor(max_features='auto', random_state=2079487600),
 DecisionTreeRegressor(max_features='auto', random_state=1784863250),
 DecisionTreeRegressor(max_features='auto', random_state=585225116),
 DecisionTreeRegressor(max_features='auto', random_state=934296216),
 DecisionTreeRegressor(max_features='auto', random_state=967598914),
 DecisionTreeRegressor(max_features='auto', random_state=808493377),
 DecisionTreeRegressor(max_features='auto', random_state=1501102625),
 DecisionTreeRegressor(max_features='auto', random_state=1478057423),
 DecisionTreeRegressor(max_features='auto', random_state=693998810),
 DecisionTreeRegressor(max_features='auto', random_state=345815647),
 DecisionTreeRegressor(max_features='auto', random_state=1453825655),
 DecisionTreeRegressor(max_features='auto', random_state=338885187),
 DecisionTreeRegressor(max_features='auto', random_state=799425960),
 DecisionTreeRegressor(max_features='auto', random_state=551348250),
 DecisionTreeRegressor(max_features='auto', random_state=137153197),
 DecisionTreeRegressor(max_features='auto', random_state=137074842),
 DecisionTreeRegressor(max_features='auto', random_state=669661759),
 DecisionTreeRegressor(max_features='auto', random_state=1890124608),
 DecisionTreeRegressor(max_features='auto', random_state=1056720134),
 DecisionTreeRegressor(max_features='auto', random_state=1165814114),
 DecisionTreeRegressor(max_features='auto', random_state=1805826497),
 DecisionTreeRegressor(max_features='auto', random_state=2066791357),
 DecisionTreeRegressor(max_features='auto', random_state=2127502291),
 DecisionTreeRegressor(max_features='auto', random_state=1455307052),
 DecisionTreeRegressor(max_features='auto', random_state=1258917627),
 DecisionTreeRegressor(max_features='auto', random_state=1670141384),
 DecisionTreeRegressor(max_features='auto', random_state=1540160575),
 DecisionTreeRegressor(max_features='auto', random_state=1652706063),
 DecisionTreeRegressor(max_features='auto', random_state=1001993396),
 DecisionTreeRegressor(max_features='auto', random_state=1467022207),
 DecisionTreeRegressor(max_features='auto', random_state=765568978),
 DecisionTreeRegressor(max_features='auto', random_state=1113551862),
 DecisionTreeRegressor(max_features='auto', random_state=1085241838),
 DecisionTreeRegressor(max_features='auto', random_state=347779920),
 DecisionTreeRegressor(max_features='auto', random_state=30692823),
 DecisionTreeRegressor(max_features='auto', random_state=1892265510),
 DecisionTreeRegressor(max_features='auto', random_state=1116546386),
 DecisionTreeRegressor(max_features='auto', random_state=721858494),
 DecisionTreeRegressor(max_features='auto', random_state=401262175),
 DecisionTreeRegressor(max_features='auto', random_state=749474958),
 DecisionTreeRegressor(max_features='auto', random_state=1289527825),
 DecisionTreeRegressor(max_features='auto', random_state=1090953854),
 DecisionTreeRegressor(max_features='auto', random_state=502767674),
 DecisionTreeRegressor(max_features='auto', random_state=792876834),
 DecisionTreeRegressor(max_features='auto', random_state=1405679591),
 DecisionTreeRegressor(max_features='auto', random_state=1372251643),
 DecisionTreeRegressor(max_features='auto', random_state=1754770613)]
</pre>

```python
from sklearn.tree import export_graphviz

estimator = lunch_model.estimators_[1]

#dot파일 생성
export_graphviz(estimator, out_file='tree.dot',
                max_depth = 3, 
                precision = 3, 
                filled = True, 
                rounded=True
               )

# png로 바꾸기
from subprocess import call
call(['dot', '-Tpng', 'tree.dot', '-o', 'decision-tree.png', '-Gdpi=600'])

# png출력
from IPython.display import Image
Image(filename = 'decision-tree.png')
```

<pre>
<IPython.core.display.Image object>
</pre>

```python
from sklearn.tree import export_graphviz

estimator = lunch_model.estimators_[3]

#dot파일 생성
export_graphviz(estimator, out_file='tree.dot',
                max_depth = 3, 
                precision = 3, 
                filled = True, 
                rounded=True
               )

# png로 바꾸기
from subprocess import call
call(['dot', '-Tpng', 'tree.dot', '-o', 'decision-tree.png', '-Gdpi=600'])

# png출력
from IPython.display import Image
Image(filename = 'decision-tree.png')
```

<pre>
<IPython.core.display.Image object>
</pre>
### 2) 석식계 예측 모델



```python
features.append('중식계')

test['중식계'] = lunch_count_predict

X = train[features]
y = train['석식계']

dinner_model = RandomForestRegressor()

dinner_model.fit(X,y)

dinner_count_predict = dinner_model.predict(test[features])

plt.figure(dpi=150)
plt.plot(dinner_count_predict, alpha=0.6, label='pred')
plt.legend()
plt.show()
```

<pre>
<Figure size 900x600 with 1 Axes>
</pre>
### 3) 제출



```python
# 이거는 다 제출 해보기

submission['중식계'] = lunch_count_predict
submission['석식계'] = dinner_count_predict
submission.to_csv('submission.csv', index=False)
```

### 4) 결과



PPT


## 4.여러 모델 사용해보기 - 선형회귀


### 1) 중식계 예측 모델



```python
features = features[:-1]

X = train[features]
y = train['중식계']

from sklearn.linear_model import LinearRegression

lunch_model = LinearRegression()

lunch_model.fit(X,y)

lunch_count_predict = lunch_model.predict(test[features])

plt.figure(dpi=150)
plt.plot(lunch_count_predict, alpha=0.6, label='pred')
plt.legend()
plt.show()
```

<pre>
<Figure size 900x600 with 1 Axes>
</pre>
### 2) 석식계 예측 모델



```python
features.append('중식계')

test['중식계'] = lunch_count_predict

X = train[features]
y = train['석식계']

dinner_model = LinearRegression()

dinner_model.fit(X,y)

dinner_count_predict = dinner_model.predict(test[features])

plt.figure(dpi=150)
plt.plot(dinner_count_predict, alpha=0.6, label='pred')
plt.legend()
plt.show()
```

<pre>
<Figure size 900x600 with 1 Axes>
</pre>
## 5.하이퍼 파라미터 튜닝하기


### 1) 중식계 예측 모델



```python
features = features[:-1]

X = train[features]
y = train['중식계']

from sklearn.ensemble import RandomForestRegressor

lunch_model = RandomForestRegressor(n_estimators=200, criterion='absolute_error')

lunch_model.fit(X,y)

lunch_count_predict = lunch_model.predict(test[features])

plt.figure(dpi=150)
plt.plot(lunch_count_predict, alpha=0.6, label='pred')
plt.legend()
plt.show()
```

<pre>
<Figure size 900x600 with 1 Axes>
</pre>
### 2) 석식계 예측 모델



```python
features.append('중식계')

test['중식계'] = lunch_count_predict

X = train[features]
y = train['석식계']

dinner_model = RandomForestRegressor(n_estimators=200, criterion='absolute_error')

dinner_model.fit(X,y)

dinner_count_predict = dinner_model.predict(test[features])

plt.figure(dpi=150)
plt.plot(dinner_count_predict, alpha=0.6, label='pred')
plt.legend()
plt.show()
```

<pre>
<Figure size 900x600 with 1 Axes>
</pre>
### 3) 제출



```python
# 이거도 다 제출 해보기

submission['중식계'] = lunch_count_predict
submission['석식계'] = dinner_count_predict
submission.to_csv('submission.csv', index=False)
```

## 6.텍스트 데이터 사용해보기



```python
def find_something(text:str):
  if '두루치기' in text:
    return True
  else:
    return False

x = ['두루치기', 'No 두루치기']
y =[train[train['중식메뉴'].map(find_something)]['중식계'].mean(),train[~train['중식메뉴'].map(find_something)]['중식계'].mean()]
plt.figure(dpi=150)
plt.title("남자들의 소울푸드")
plt.xlabel('메뉴')
plt.ylabel('중식계')
plt.bar(x, y)
plt.show()
```

<pre>
<Figure size 900x600 with 1 Axes>
</pre>

```python
def find_something(text:str):
  if '불고기' in text:
    return True
  else:
    return False

x = ['불고기', 'No 불고기']
y =[train[train['중식메뉴'].map(find_something)]['중식계'].mean(),train[~train['중식메뉴'].map(find_something)]['중식계'].mean()]
plt.figure(dpi=150)
plt.title("한국인의 소울푸드")
plt.xlabel('메뉴')
plt.ylabel('중식계')
plt.bar(x, y)
plt.show()
```

<pre>
<Figure size 900x600 with 1 Axes>
</pre>

```python
def find_something(text:str):
  if '파인애플볶음밥' in text:
    return True
  else:
    return False

x = ['파인애플 볶음밥', 'No 파인애플 볶음밥']
y =[train[train['중식메뉴'].map(find_something)]['중식계'].mean(),train[~train['중식메뉴'].map(find_something)]['중식계'].mean()]
plt.figure(dpi=150)
plt.title("호? 불호?")
plt.xlabel('메뉴')
plt.ylabel('중식계')
plt.bar(x, y)
plt.show()
```

<pre>
<Figure size 900x600 with 1 Axes>
</pre>

```python
def find_something(text:str):
  if '닭볶음탕' in text:
    return True
  else:
    return False

x = ['닭볶음탕', 'No 닭볶음탕']
y =[train[train['중식메뉴'].map(find_something)]['중식계'].mean(),train[~train['중식메뉴'].map(find_something)]['중식계'].mean()]
plt.figure(dpi=150)
plt.title("호? 불호?")
plt.xlabel('메뉴')
plt.ylabel('중식계')
plt.bar(x, y)
plt.show()
```

<pre>
<Figure size 900x600 with 1 Axes>
</pre>

```python
train[features]
```

<pre>
     요일  월   일     현재원  본사휴가자수  본사출장자수  본사시간외근무명령서승인건수  현본사소속재택근무자수     중식계
0     1  2   1  2401.0      50     150             238          0.0  1039.0
1     2  2   2  2378.0      50     173             319          0.0   867.0
2     3  2   3  2365.0      56     180             111          0.0  1017.0
3     4  2   4  2277.0     104     220             355          0.0   978.0
4     5  2   5  2142.0     278     181              34          0.0   925.0
...  .. ..  ..     ...     ...     ...             ...          ...     ...
1200  3  1  20  2319.0      75     198               4        391.0  1093.0
1201  4  1  21  2309.0      92     231             462        351.0   832.0
1202  5  1  22  2177.0     255     248               1        303.0   579.0
1203  1  1  25  2396.0     107     153             616        327.0  1145.0
1204  2  1  26  2369.0      69     183             551        362.0  1015.0

[1162 rows x 9 columns]
</pre>

```python
features=features[:-1]
features
```

<pre>
['요일', '월', '일', '현재원', '본사휴가자수', '본사출장자수', '본사시간외근무명령서승인건수', '현본사소속재택근무자수']
</pre>

```python
X=train[features]
y=train['중식계']
```


```python
X
```

<pre>
     요일  월   일     현재원  본사휴가자수  본사출장자수  본사시간외근무명령서승인건수  현본사소속재택근무자수
0     1  2   1  2401.0      50     150             238          0.0
1     2  2   2  2378.0      50     173             319          0.0
2     3  2   3  2365.0      56     180             111          0.0
3     4  2   4  2277.0     104     220             355          0.0
4     5  2   5  2142.0     278     181              34          0.0
...  .. ..  ..     ...     ...     ...             ...          ...
1200  3  1  20  2319.0      75     198               4        391.0
1201  4  1  21  2309.0      92     231             462        351.0
1202  5  1  22  2177.0     255     248               1        303.0
1203  1  1  25  2396.0     107     153             616        327.0
1204  2  1  26  2369.0      69     183             551        362.0

[1162 rows x 8 columns]
</pre>

```python
from sklearn.model_selection import train_test_split

X_train, X_valid, y_train, y_valid = train_test_split(X, y, test_size=0.2, shuffle=True)
```


```python
X_train
```

<pre>
     요일   월   일     현재원  본사휴가자수  본사출장자수  본사시간외근무명령서승인건수  현본사소속재택근무자수
307   4   4  27  2254.0      61     311             183          0.0
511   5   3   2  1668.0     840     206              57          0.0
883   1   9  16  2672.0     259     180             631          0.0
508   1   2  26  2371.0     105     231             491          0.0
994   4   2  27  2529.0     121     217             667          5.0
...  ..  ..  ..     ...     ...     ...             ...          ...
316   2   5  16  2330.0      41     266             486          0.0
904   5  10  18  2489.0     332     300               2          0.0
1040  4   5   7  2365.0      76     236             577        285.0
656   2  10  16  2469.0      63     273             315          0.0
1052  1   5  25  2429.0      98     206             732        229.0

[929 rows x 8 columns]
</pre>

```python
X_valid
```

<pre>
     요일   월   일     현재원  본사휴가자수  본사출장자수  본사시간외근무명령서승인건수  현본사소속재택근무자수
724   2   1  22  2682.0      73     230             436          0.0
861   1   8  12  2703.0     394     208             424          0.0
1061  5   6   5  2256.0     233     291               0        176.0
739   5   2  15  2369.0     159     278               1          0.0
642   2   9  11  2424.0      67     272             370          0.0
...  ..  ..  ..     ...     ...     ...             ...          ...
27    2   3  15  2355.0      38     231             399          0.0
199   3  11  23  2386.0      52     251               0          0.0
1163  5  11  20  2239.0     343     292               0        147.0
394   2   9   5  2303.0      74     265             390          0.0
495   1   2   5  2418.0      76     213             560          0.0

[233 rows x 8 columns]
</pre>

```python
lunch_model=DecisionTreeRegressor()

lunch_model.fit(X_train, y_train)

lunch_count_predict=lunch_model.predict(X_valid)
```


```python
len(lunch_count_predict)
```

<pre>
233
</pre>

```python
len(y_valid)
```

<pre>
233
</pre>

```python
y_valid
```

<pre>
724      889.0
861     1073.0
1061     505.0
739      682.0
642      960.0
         ...  
27       958.0
199      891.0
1163     747.0
394      924.0
495     1372.0
Name: 중식계, Length: 233, dtype: float64
</pre>

```python
plt.figure(dpi=150)

plt.plot(lunch_count_predict, alpha=0.6, label='pred')
plt.plot(y_valid.reset_index(drop=True), alpha=0.6, label='real')

plt.legend()
plt.show()
```

<pre>
<Figure size 900x600 with 1 Axes>
</pre>

```python
from sklearn.metrics import mean_absolute_error

mae=mean_absolute_error(lunch_count_predict, y_valid.reset_index(drop=True))
print(mae)
```

<pre>
100.3519313304721
</pre>

```python
from sklearn.ensemble import RandomForestRegressor

lunch_model=RandomForestRegressor()

lunch_model.fit(X_train, y_train)

lunch_count_predict=lunch_model.predict(X_valid)
```


```python
len(lunch_count_predict), len(y_valid)
```

<pre>
(233, 233)
</pre>

```python
plt.figure(dpi=150)

plt.plot(lunch_count_predict, alpha=0.6, label='pred')
plt.plot(y_valid.reset_index(drop=True), alpha=0.6, label='real')

plt.legend()
```

<pre>
<matplotlib.legend.Legend at 0x7f00b270fc50>
</pre>
<pre>
<Figure size 900x600 with 1 Axes>
</pre>

```python
mae=mean_absolute_error(lunch_count_predict, y_valid)
print(mae)
```

<pre>
75.25978540772532
</pre>

```python
lunch_model=RandomForestRegressor(n_estimators=200, criterion='absolute_error')

lunch_model.fit(X_train, y_train)

lunch_count_predict=lunch_model.predict(X_valid)

len(lunch_count_predict)                
```

<pre>
233
</pre>

```python
plt.figure(dpi=150)

plt.plot(lunch_count_predict, alpha=0.6, label='pred')

plt.plot(y_valid.reset_index(drop=True), alpha=0.6, label='real')

plt.legend()
```

<pre>
<matplotlib.legend.Legend at 0x7f00b26d4750>
</pre>
<pre>
<Figure size 900x600 with 1 Axes>
</pre>

```python
mae=mean_absolute_error(lunch_count_predict, y_valid.reset_index(drop=True))

print(mae)
```

<pre>
75.07467811158799
</pre>

```python
X=train[features]
y=train['중식계']

lunch_model.fit(X, y)
lunch_count_predict=lunch_model.predict(test[features])

len(X)
```

<pre>
1162
</pre>

```python
```
